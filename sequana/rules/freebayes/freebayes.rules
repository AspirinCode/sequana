rule freebayes:
    input:
        bam = freebayes_input,
        ref = cfg.PROJECT + "/references/%s.fa" % cfg.PROJECT
    output:
        vcf = cfg.PROJECT + "/freebayes/%s.vcf" % cfg.PROJECT
    log:
        out = cfg.PROJECT + "/logs/freebayes/stdout.logs",
        err = cfg.PROJECT + "/logs/freebayes/stderr.logs"
    params:
        freebayes_params = " ".join(['%s %s' % (key, value) for (key, value) \
            in config["freebayes"].items()])
    shell:
        """
        samtools index {input.bam}
        freebayes {params.freebayes_params} -f {input.ref} \
        -b {input.bam} -v {output.vcf} > {log.out} 2> {log.err}
        """
