rule freebayes:
    input:
        bam = freebayes_input,
        ref = config["ref"]
    output:
        vcf = "freebayes/" + config["output"] + ".vcf"
    log:
        out = config["output"] + "_logs/freebayes/stdout.logs",
        err = config["output"] + "_logs/freebayes/stderr.logs"
    params:
        freebayes_params = " ".join(['%s %s' % (key, value) for (key, value) \
            in config["freebayes"].items()])
    shell:
        """
        samtools index {input.bam}
        freebayes {params.freebayes_params} -f {input.ref} \
        -b {input.bam} -v {output.vcf} > {log.out} 2> {log.err}
        """
